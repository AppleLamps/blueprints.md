# Makefile for main
# Generated by blueprints.md

.PHONY: help install install-dev setup run dev test clean

help:
	@echo 'Available commands:'
	@echo '  install     - Install production dependencies'
	@echo '  install-dev - Install development dependencies'
	@echo '  setup       - Complete project setup'
	@echo '  run         - Run the application'
	@echo '  dev         - Run in development mode'
	@echo '  test        - Run tests'
	@echo '  clean       - Clean up generated files'

requirements.txt:
	@echo 'Generating requirements.txt...'
	@echo '# Production dependencies' > requirements.txt
	@echo 'fastapi>=0.104.0' >> requirements.txt
	@echo 'uvicorn[standard]>=0.24.0' >> requirements.txt
	@echo 'sqlalchemy>=2.0.0' >> requirements.txt
	@echo 'aiosqlite>=0.19.0' >> requirements.txt
	@echo 'bcrypt>=4.0.0' >> requirements.txt
	@echo 'python-jose[cryptography]>=3.3.0' >> requirements.txt
	@echo 'python-multipart>=0.0.6' >> requirements.txt
	@echo 'pydantic>=2.0.0' >> requirements.txt

requirements-dev.txt:
	@echo 'Generating requirements-dev.txt...'
	@echo '# Development dependencies' > requirements-dev.txt
	@echo 'pytest>=7.0.0' >> requirements-dev.txt
	@echo 'pytest-asyncio>=0.21.0' >> requirements-dev.txt
	@echo 'httpx>=0.25.0' >> requirements-dev.txt
	@echo 'black>=23.0.0' >> requirements-dev.txt
	@echo 'mypy>=1.5.0' >> requirements-dev.txt

install: requirements.txt
	@echo 'Installing production dependencies...'
	pip install -r requirements.txt

install-dev: requirements-dev.txt
	@echo 'Installing development dependencies...'
	pip install -r requirements-dev.txt

setup: install install-dev
	@echo 'Project setup complete!'
	@echo 'Environment variables to set:'

run:
	@echo 'Starting app...'
	python -m app

dev:
	@echo 'Starting app in development mode...'
	python -m app --reload

test:
	@echo 'Running tests...'
	pytest

clean:
	@echo 'Cleaning up...'
	find . -type f -name '*.pyc' -delete
	find . -type d -name '__pycache__' -delete
	rm -f requirements.txt requirements-dev.txt
